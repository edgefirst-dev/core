---
title: Setup
group: Documents
category: Guides
---

# Setup the Edge-first Runtime

The Edge-first Runtime is what gives you access to the different functions you can import from `edgekitjs`.

Right now, the only way to setup this runtime is by using a Hono server, to do use you will have install the `edgeRuntime` middleware.

```ts
import { edgeRuntime } from "edgekitjs/hono";
```

Then you can add it to any Hono application.

```ts
app.use(edgeRuntime());
```

Any middleware after the `edgeRuntime` middleware will have access to the Edge-first runtime.

## Bindings

The middleware expects the Bindings of the Hono application to be configured in a certain way, you can import the `Bindings` interface provided from `edgekitjs` to use it in your application.

```ts
import type { Bindings } from "edgekitjs";

const app = new Hono<{ Bindings: Bindings }>();
```

If you want to extend the Bindings with your own custom bindings, you can do so by extending the `Bindings` interface.

```ts
import "edgekitjs";

declare module "edgekitjs" {
  interface Bindings {
    // Add your custom bindings here
  }
}
```

If you're using `wrangler types` to generate the types, you can make `Bindings` extends the interface generated by `wrangler types`.

## Configure Remix + Hono with the Edge-first Runtime

To use Remix with the Edge-first Runtime, you can use the `remix-hono` package to create a Remix request handler and use it after the `edgeRuntime` middleware.

```ts
import type { Bindings } from "edgekitjs"; // Binding types
import { edgeRuntime } from "edgekitjs/hono"; // The Edge-first Runtime middleware
import type { ServerBuild } from "@remix-run/cloudflare";
import { Hono } from "hono";
import { staticAssets } from "remix-hono/cloudflare";
import { remix } from "remix-hono/handler"; // The Remix middleware

const app = new Hono<{ Bindings: Bindings }>();

app.use(staticAssets());

app.use(edgeRuntime()); //Add it before your Remix handler

app.use(async (c, next) => {
  // Import the server build in the middleware to ensure the whole codebase is
  // inside the Edge-first Runtime
  let serverBuild = await importServerBuild();
  let handler = remix({
    build: serverBuild,
    mode: import.meta.env.PROD ? "production" : "development",
  });
  // Then call the Remix handler
  return handler(c, next);
});

// This function will import the server build for the Remix app
function importServerBuild(): Promise<ServerBuild> {
  if (process.env.NODE_ENV === "development") {
    // @ts-expect-error - TS doesn't know about virtual:remix/server-build
    return import("virtual:remix/server-build");
  }

  // @ts-expect-error - This file will not exists until we build the app
  return import("../build/server");
}

export default app;
```
